<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Be My Valentine?</title>

  <style>
    :root{
      --pink:#ff4d8d;
      --pink2:#ff85b3;
      --bg1:#fff0f6;
      --bg2:#fff7fb;
      --text:#2b2b2b;
      --card:#ffffff;
      --shadow: 0 18px 50px rgba(255,77,141,.18);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      background: radial-gradient(circle at 20% 20%, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* ===== Heart Rain ===== */
    #heartRain{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:0;
      overflow:hidden;
    }
    .rainHeart{
      position:absolute;
      top:-40px;
      width:18px; height:18px;
      background: rgba(255,133,179,.55);
      transform: rotate(45deg);
      border-radius:4px;
      animation: fall linear infinite;
      filter: drop-shadow(0 4px 8px rgba(255,77,141,.18));
    }
    .rainHeart::before,.rainHeart::after{
      content:"";
      position:absolute;
      width:18px; height:18px;
      background: rgba(255,133,179,.55);
      border-radius:50%;
    }
    .rainHeart::before{ left:-9px; top:0; }
    .rainHeart::after{ left:0; top:-9px; }

    @keyframes fall{
      from { transform: translateY(-60px) rotate(45deg); opacity:.0; }
      10%  { opacity: .95; }
      to   { transform: translateY(120vh) rotate(45deg); opacity:.0; }
    }

    /* ===== Main Card ===== */
    .card{
      width:min(820px, 100%);
      background:var(--card);
      border-radius:24px;
      box-shadow: var(--shadow);
      padding:22px;
      position:relative;
      z-index:2;
    }

    .topRow{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:16px;
      align-items:stretch;
    }
    @media (max-width: 780px){
      .topRow{ grid-template-columns: 1fr; }
    }

    .imgWrap{
      width:100%;
      aspect-ratio: 16 / 10;
      border-radius:18px;
      overflow:hidden;
      background: #ffe3ee;
      display:flex;
      align-items:center;
      justify-content:center;
      border: 2px solid rgba(255,77,141,.15);
      position:relative;
    }
    .imgWrap img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .rightPanel{
      background: linear-gradient(180deg, rgba(255,77,141,.08), rgba(255,133,179,.06));
      border: 2px solid rgba(255,77,141,.10);
      border-radius:18px;
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    h1{
      margin:10px 0 6px;
      font-size: clamp(22px, 4.5vw, 34px);
      line-height:1.1;
      text-align:center;
    }
    .subtitle{
      margin:0 0 10px;
      opacity:.85;
      text-align:center;
    }

    /* ===== Fake compatibility loader (Idea 9) ===== */
    .loaderBox{
      background:white;
      border-radius:16px;
      padding:12px;
      border:1px solid rgba(0,0,0,.06);
    }
    .loaderTitle{
      font-weight:800;
      margin:0 0 8px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:center;
    }
    .bar{
      height:12px;
      border-radius:999px;
      background: rgba(0,0,0,.06);
      overflow:hidden;
    }
    .bar > div{
      height:100%;
      width:0%;
      border-radius:999px;
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      transition: width .2s ease;
    }
    .loaderNote{
      font-size:12px;
      opacity:.72;
      margin-top:8px;
    }

    /* ===== Polaroid gallery (Idea 6) ===== */
    .polaroids{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    @media (max-width: 780px){
      .polaroids{ grid-template-columns: repeat(2, 1fr); }
    }
    .polaroid{
      background:white;
      border-radius:14px;
      padding:8px 8px 14px;
      box-shadow: 0 14px 30px rgba(0,0,0,.08);
      border:1px solid rgba(0,0,0,.06);
      transform: rotate(var(--r));
      transition: transform .15s ease;
    }
    .polaroid:hover{
      transform: rotate(var(--r)) translateY(-2px) scale(1.01);
    }
    .polaroid img{
      width:100%;
      aspect-ratio: 1 / 1;
      object-fit:cover;
      border-radius:10px;
      display:block;
      background:#f3f3f3;
    }
    .cap{
      margin-top:8px;
      font-size:12px;
      font-weight:800;
      opacity:.85;
      text-align:center;
    }

    /* ===== Buttons ===== */
    .buttons{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:14px;
      position:relative;
      height:70px;
    }
    button{
      border:0;
      padding:14px 20px;
      border-radius:999px;
      font-size:16px;
      font-weight:800;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
      user-select:none;
      min-width:140px;
    }
    #yesBtn{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:white;
      box-shadow: 0 10px 22px rgba(255,77,141,.35);
    }
    #yesBtn:hover{ transform: translateY(-1px) scale(1.02); }
    #noBtn{
      background:#f2f2f2;
      color:#444;
      box-shadow: 0 8px 18px rgba(0,0,0,.06);
      position:relative;
    }

    /* sound toggle */
    .soundRow{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-top:8px;
      padding:10px 12px;
      background: rgba(255,255,255,.7);
      border-radius:14px;
      border:1px solid rgba(0,0,0,.06);
    }
    .soundRow small{ opacity:.75; }
    .toggle{
      display:flex;
      gap:8px;
      align-items:center;
      font-weight:800;
    }
    .toggle input{ transform: scale(1.15); }

    .result{
      margin-top:12px;
      font-size:18px;
      font-weight:900;
      min-height:28px;
      text-align:center;
    }

    .tiny{
      margin-top:8px;
      font-size:12px;
      opacity:.65;
      text-align:center;
    }

    /* ===== Fireworks/confetti (Idea 11) ===== */
    .fxLayer{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:5;
      overflow:hidden;
    }
    .spark{
      position:absolute;
      width:10px; height:10px;
      border-radius:50%;
      animation: burst 900ms ease-out forwards;
      opacity:.95;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
    }
    @keyframes burst{
      from{ transform: translate(0,0) scale(1); }
      to{ transform: translate(var(--dx), var(--dy)) scale(0.2); opacity:0; }
    }
  </style>
</head>

<body>
  <!-- Heart Rain -->
  <div id="heartRain"></div>

  <!-- Effects layer -->
  <div class="fxLayer" id="fx"></div>

  <main class="card" aria-live="polite">

    <div class="topRow">
      <!-- Main cute image -->
      <div class="imgWrap">
        <!-- Change this src to any image URL OR your own uploaded image -->
        <img alt="Cute valentines image"
             src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?auto=format&fit=crop&w=1400&q=80">
      </div>

      <!-- Right panel: compatibility + polaroids -->
      <div class="rightPanel">

        <!-- Compatibility loader -->
        <div class="loaderBox" id="loaderBox">
          <div class="loaderTitle">
            <span>Calculating compatibility‚Ä¶</span>
            <span id="pct">0%</span>
          </div>
          <div class="bar"><div id="barFill"></div></div>
          <div class="loaderNote" id="loaderNote">Please do not panic. Science is happening.</div>
        </div>

        <!-- Polaroids -->
        <div class="polaroids">
          <!-- Replace these images with YOUR photos (see instructions below) -->
          <div class="polaroid" style="--r:-3deg">
            <img src="photos/pic1.jpg" alt="memory 1" onerror="this.src='https://picsum.photos/300?random=11'">
            <div class="cap">little moments</div>
          </div>
          <div class="polaroid" style="--r:2deg">
            <img src="photos/pic2.jpg" alt="memory 2" onerror="this.src='https://picsum.photos/300?random=12'">
            <div class="cap">big smiles</div>
          </div>
          <div class="polaroid" style="--r:-1deg">
            <img src="photos/pic3.jpg" alt="memory 3" onerror="this.src='https://picsum.photos/300?random=13'">
            <div class="cap">our vibe</div>
          </div>
        </div>

        <!-- Heartbeat sound toggle -->
        <div class="soundRow">
          <div>
            <div style="font-weight:900;">Heartbeat mode üíì</div>
            <small>(If it doesn‚Äôt play, tap the checkbox once)</small>
          </div>
          <label class="toggle">
            <input type="checkbox" id="soundToggle" checked />
            On
          </label>
        </div>

      </div>
    </div>

    <h1 id="title">Will you be my Valentine? üíñ</h1>
    <p class="subtitle" id="subtitle">I made this little page just for you.</p>

    <div class="buttons" id="btnArea">
      <button id="yesBtn">Yes üòç</button>
      <button id="noBtn">No üôà</button>
    </div>

    <div class="result" id="result"></div>
    <div class="tiny">Tip: Add your photos by uploading them into a folder called <b>photos</b> in this repo.</div>

    <!-- Heartbeat audio (Idea 3). Put heartbeat.mp3 in repo root OR use a direct URL -->
    <audio id="heartbeat" loop preload="auto">
      <source src="heartbeat.mp3" type="audio/mpeg">
    </audio>
  </main>

  <script>
    // ======= CONFIG YOU CAN EDIT =======
    const herName = ""; // e.g. "Aisha"
    const yesMessage = `YAY!! ${herName ? herName + " " : ""}üíû You just made my day. Happy Valentine‚Äôs!`;
    const noStages = [
      "No üôà",
      "Maybe‚Ä¶ üò≥",
      "Hmm‚Ä¶ ü§î",
      "Are you sure? ü•∫",
      "Ok fine‚Ä¶ YES üòç"
    ];
    // ===================================

    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const result = document.getElementById("result");
    const title  = document.getElementById("title");
    const subtitle = document.getElementById("subtitle");
    const btnArea = document.getElementById("btnArea");

    // Loader elements (Idea 9)
    const pct = document.getElementById("pct");
    const barFill = document.getElementById("barFill");
    const loaderNote = document.getElementById("loaderNote");

    // Audio (Idea 3)
    const heartbeat = document.getElementById("heartbeat");
    const soundToggle = document.getElementById("soundToggle");

    // FX (Idea 11)
    const fx = document.getElementById("fx");

    // Heart rain
    const heartRain = document.getElementById("heartRain");

    // ---- Heart Rain generator ----
    function spawnRainHeart(){
      const h = document.createElement("div");
      h.className = "rainHeart";

      const left = Math.random() * 100; // %
      const size = 10 + Math.random() * 18; // px
      const dur  = 3.5 + Math.random() * 4.5; // seconds
      const drift = (Math.random() * 60 - 30); // little side drift

      h.style.left = left + "%";
      h.style.width = size + "px";
      h.style.height = size + "px";
      h.style.animationDuration = dur + "s";
      h.style.transform = `translateX(${drift}px) rotate(45deg)`;

      // vary opacity slightly
      h.style.opacity = (0.25 + Math.random() * 0.65).toFixed(2);

      heartRain.appendChild(h);
      setTimeout(() => h.remove(), (dur + 0.2) * 1000);
    }
    // spawn a steady rain
    setInterval(spawnRainHeart, 180);
    // initial burst
    for(let i=0;i<20;i++) setTimeout(spawnRainHeart, i*80);

    // ---- Compatibility loader (Idea 9) ----
    function runLoader(){
      let p = 0;
      const notes = [
        "Collecting adorable evidence‚Ä¶",
        "Running romance algorithm‚Ä¶",
        "Cross-checking snack compatibility‚Ä¶",
        "Finalizing results‚Ä¶"
      ];
      let noteIdx = 0;

      const t = setInterval(() => {
        p += Math.floor(2 + Math.random()*6);
        if (p > 100) p = 100;
        pct.textContent = p + "%";
        barFill.style.width = p + "%";

        if (p % 25 < 6 && noteIdx < notes.length){
          loaderNote.textContent = notes[noteIdx++];
        }

        if (p === 100){
          clearInterval(t);
          loaderNote.textContent = "MATCH: 100% ‚úÖ (This is scientifically confirmed.)";
        }
      }, 120);
    }
    runLoader();

    // ---- Audio handling (Idea 3) ----
    async function tryPlayHeartbeat(){
      if(!soundToggle.checked) return;
      try{
        await heartbeat.play();
      }catch(e){
        // autoplay may be blocked until user interacts
      }
    }
    // Attempt on load
    window.addEventListener("load", tryPlayHeartbeat);
    // If user toggles sound
    soundToggle.addEventListener("change", async () => {
      if(soundToggle.checked){
        await tryPlayHeartbeat();
      }else{
        heartbeat.pause();
        heartbeat.currentTime = 0;
      }
    });
    // If user taps anywhere, try again (helps on iOS)
    document.addEventListener("click", tryPlayHeartbeat, { once:false });

    // ---- Fireworks/confetti burst (Idea 11) ----
    function fireworksBurst(x, y){
      const dots = 42;
      const colors = ["#ff4d8d","#ff85b3","#ffd1e3","#ffcc66","#a7f3d0","#93c5fd","#c4b5fd"];
      for(let i=0;i<dots;i++){
        const d = document.createElement("div");
        d.className = "spark";
        d.style.left = x + "px";
        d.style.top  = y + "px";
        d.style.background = colors[Math.floor(Math.random()*colors.length)];
        const dx = (Math.random()*520 - 260) + "px";
        const dy = (Math.random()*420 - 240) + "px";
        d.style.setProperty("--dx", dx);
        d.style.setProperty("--dy", dy);
        fx.appendChild(d);
        setTimeout(()=>d.remove(), 950);
      }
    }

    // ---- (2) No turns into Yes step-by-step ----
    let noIndex = 0;

    // Make "No" move slightly too (still playful)
    function moveNoButtonSoft(){
      const area = btnArea.getBoundingClientRect();
      const btn  = noBtn.getBoundingClientRect();
      const maxX = area.width - btn.width;
      const maxY = area.height - btn.height;

      const x = Math.random() * maxX;
      const y = Math.random() * maxY;

      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
    }

    noBtn.addEventListener("click", () => {
      noIndex = Math.min(noIndex + 1, noStages.length - 1);
      noBtn.textContent = noStages[noIndex];

      // If it reaches the final stage, trigger YES automatically
      if (noIndex === noStages.length - 1){
        yesBtn.click();
        return;
      }

      // gentle dodge
      moveNoButtonSoft();

      // tiny message
      result.textContent = "Wait‚Ä¶ that button is acting suspicious ü§®";
    });

    // ---- YES behavior ----
    yesBtn.addEventListener("click", (e) => {
      title.textContent = "It‚Äôs a date!! üíò";
      subtitle.textContent = "Okay‚Ä¶ I‚Äôm officially smiling too much right now.";
      result.textContent = yesMessage;

      // fireworks from button position
      const r = yesBtn.getBoundingClientRect();
      const x = r.left + r.width/2;
      const y = r.top + r.height/2;
      fireworksBurst(x, y);
      setTimeout(()=>fireworksBurst(x+40,y-20), 140);
      setTimeout(()=>fireworksBurst(x-40,y-10), 260);

      // lock no button
      noBtn.disabled = true;
      noBtn.style.opacity = 0.5;
      noBtn.style.cursor = "not-allowed";

      // make loader say the final thing if not already
      pct.textContent = "100%";
      barFill.style.width = "100%";
      loaderNote.textContent = "MATCH: 100% ‚úÖ (and yes, this is official.)";

      // ensure heartbeat is on if checked
      tryPlayHeartbeat();
    });
  </script>
</body>
</html>
